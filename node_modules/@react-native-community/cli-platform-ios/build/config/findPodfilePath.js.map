{"version":3,"sources":["../../src/config/findPodfilePath.ts"],"names":["TEST_PROJECTS","IOS_BASE","findPodfilePath","cwd","podfiles","filter","project","path","dirname","test","sort","length","logger","warn","join"],"mappings":";;;;;;;AAQA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;;;;AAVA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AACA,MAAMA,aAAa,GAAG,sBAAtB,C,CAEA;;AACA,MAAMC,QAAQ,GAAG,KAAjB;;AAEe,SAASC,eAAT,CAAyBC,GAAzB,EAAsC;AACnD,QAAMC,QAAQ,GAAG,kCAAoBD,GAApB;AACf;AACJ;AACA;AACA;AAJmB,GAKdE,MALc,CAMZC,OAAD,IACEC,gBAAKC,OAAL,CAAaF,OAAb,MAA0BL,QAA1B,IAAsC,CAACD,aAAa,CAACS,IAAd,CAAmBH,OAAnB,CAP5B;AASf;AACJ;AACA;AAXmB,GAYdI,IAZc,CAYRJ,OAAD,IAAcC,gBAAKC,OAAL,CAAaF,OAAb,MAA0BL,QAA1B,GAAqC,CAAC,CAAtC,GAA0C,CAZ/C,CAAjB;;AAcA,MAAIG,QAAQ,CAACO,MAAT,GAAkB,CAAtB,EAAyB;AACvB,QAAIP,QAAQ,CAACO,MAAT,GAAkB,CAAtB,EAAyB;AACvBC,yBAAOC,IAAP,CACE,8BAAc;AACtB,0CAA0CT,QAAS,cAAaA,QAAQ,CAAC,CAAD,CAAI;AAC5E;AACA;AACA,SAJQ,CADF;AAOD;;AACD,WAAOG,gBAAKO,IAAL,CAAUX,GAAV,EAAeC,QAAQ,CAAC,CAAD,CAAvB,CAAP;AACD;;AAED,SAAO,IAAP;AACD","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport {inlineString, logger} from '@react-native-community/cli-tools';\nimport path from 'path';\nimport findAllPodfilePaths from './findAllPodfilePaths';\n\n// Regexp matching all test projects\nconst TEST_PROJECTS = /test|example|sample/i;\n\n// Base iOS folder\nconst IOS_BASE = 'ios';\n\nexport default function findPodfilePath(cwd: string) {\n  const podfiles = findAllPodfilePaths(cwd)\n    /**\n     * Then, we will run a simple test to rule out most example projects,\n     * unless they are located in a `ios` folder\n     */\n    .filter(\n      (project) =>\n        path.dirname(project) === IOS_BASE || !TEST_PROJECTS.test(project),\n    )\n    /**\n     * Podfile from `ios` folder will be picked up as a first one.\n     */\n    .sort((project) => (path.dirname(project) === IOS_BASE ? -1 : 1));\n\n  if (podfiles.length > 0) {\n    if (podfiles.length > 1) {\n      logger.warn(\n        inlineString(`\n          Multiple Podfiles were found: ${podfiles}. Choosing ${podfiles[0]} automatically.\n          If you would like to select a different one, you can configure it via \"project.ios.sourceDir\".\n          You can learn more about it here: https://github.com/react-native-community/cli/blob/master/docs/configuration.md\n        `),\n      );\n    }\n    return path.join(cwd, podfiles[0]);\n  }\n\n  return null;\n}\n"]}